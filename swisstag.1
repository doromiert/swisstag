.TH SWISSTAG 1 "November 2025" "5.2" "User Commands"
.SH NAME
swisstag - Automated music tagger using Genius and MusicBrainz

.SH SYNOPSIS
.B swisstag
[\fIOPTIONS\fR] [\fIFILE\fR|\fIDIRECTORY\fR]

.SH DESCRIPTION
.B swisstag
is an intelligent music tagging utility that fetches metadata, lyrics, and cover art from Genius and MusicBrainz. It is designed to process single files or entire albums, handling complex tasks like feature artist splitting, band member expansion, and file renaming automatically.

When processing a single \fIFILE\fR, \fBswisstag\fR automatically cleans the filename to improve search accuracy and downloads all available metadata tags (Title, Artist, Album, Year, Cover Art, Lyrics, etc.) by default.

.SH OPTIONS

.SS "Core Modes"
.TP
.BR -a ", " --album
Activates Album Mode. Fetches the full tracklist from Genius first, then matches local files to the official tracklist using fuzzy matching. Recommended for processing directories.
.TP
.BR -p ", " --chromaprint
Use acoustic fingerprinting (AcoustID) to identify files via audio content rather than filenames. Requires \fBfpcalc\fP (chromaprint) to be installed.
.TP
.BR -s ", " --search \ \fIKEY=VALUE\fP...
Provide manual search criteria to bypass local tag reading or directory inference.
.br
Keys: \fIname\fP, \fIartist\fP, \fIurl\fP.
.br
Example: \fB--search artist="Kanye West" name="Yeezus"\fP

.SS "Tagging & Handling"
.TP
.BR -t ", " --manual-tags \ \fITAG=VALUE\fP...
Manually override specific tags before applying.
.br
Tags: \fItitle\fP, \fIartist\fP, \fIalbum\fP, \fIyear\fP, \fIgenre\fP.
.TP
.BR -F ", " --feat-handling \ \fIMODE\fP
Controls how "feat." artists in song titles are handled.
.br
\fBkeep-title\fP: (Default) Moves artist to Artist tag, but leaves title as-is.
.br
\fBkeep-artist\fP: Removes artist from Title tag, but does NOT move it to Artist tag.
.br
\fBkeep-both\fP: Warns if features detected, but modifies neither Title nor Artist tags.
.br
\fBsplit\fP: Moves artist to Artist tag, adds "!" prefix to title.
.br
\fBsplit-clean\fP: Moves artist to Artist tag, removes from title entirely.

.SS "Filesystem Operations"
.TP
.BR -f ", " --filesystem \ \fIOPTS\fP
Comma-separated list of filesystem actions.
.br
\fBrename\fP: Renames files to "Title.mp3".
.br
\fBmatch-filename\fP: Matches tracks by filename similarity (Album Mode).
.br
\fBinfer-dirs\fP: Infers Artist/Album from parent directory names.
.br
\fBautosort\fP: Moves files into "Artist/Album/" structure.

.SS "Media (Lyrics & Cover)"
.TP
.BR -c ", " --cover-art \ \fIMODE\fP
\fBauto\fP: Fetches from Genius.
.br
\fBfile=/path.jpg\fP: Uses local image.
.br
\fBextract\fP: Extracts embedded art.
.TP
.BR -l ", " --lyrics \ \fIMODE\fP
Controls lyrics fetching and saving. By default, lyrics are always fetched in \fBauto\fP mode. Use \fBskip\fP to disable fetching altogether.
.br
\fBembed\fP: Writes to USLT/LYRICS tag.
.br
\fBlrc\fP: Saves separate .lrc file.
.br
\fBboth\fP: Does both.
.br
\fBskip\fP: Explicitly skips lyrics fetching.
.TP
.BR -L ", " --lyrics-source \ \fISOURCE\fP
Control source of lyrics.
.br
\fBinteractive\fP: Interactive picker for every track.
.br
\fBauto\fP: Genius first, fallback to SyncedLyrics. If fails, asks user interactively.
.br
\fBsynced\fP: Force line-by-line (LRC) lyrics via SyncedLyrics.
.br
\fBgenius\fP: Force Genius API only.

.SS "Configuration"
.TP
.BR -C ", " --config \ \fIACTION TARGET=[VALUE]\fP
Manage configuration.
.br
Actions: \fBget\fP, \fBset\fP.
.br
Example: \fBswisstag -C set defaults.rename true\fP
.TP
.BR -S ", " --set \ \fITARGET=[VALUE]\fP
Temporarily override configuration values for the current session without saving to the config file.
.TP
.BR --setup-token
Runs the interactive wizard to set up the Genius API token.
.TP
.BR --install-deps
Automatically installs required Python dependencies via pip.

.SH EXAMPLES
.TP
.B Process an album using folder names:
swisstag -a -f infer-dirs,rename

.TP
.B Identify a mystery file using fingerprinting:
swisstag mystery_file.mp3 -p

.TP
.B Tag a single file (default grabs ALL tags):
swisstag my_song.mp3

.TP
.B Tag a single file but skip lyrics:
swisstag my_song.mp3 -l skip

.TP
.B View detailed help for search:
swisstag -h -s

.SH FILES
.TP
.I ~/.config/swisstag/config.json
User configuration file.

.SH SEE ALSO
.BR swisstag --help